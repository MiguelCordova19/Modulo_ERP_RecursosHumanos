<!-- Incluir estilos específicos para el módulo -->
<link rel="stylesheet" href="/css/modules/module-tables.css">

<!-- Formulario de Registro de Usuario -->
<div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
    <h1 class="h2">
        <i class="fas fa-user-plus me-2" style="color: #FF7E70;"></i>
        Registrar Usuario
    </h1>
    <div class="btn-toolbar mb-2 mb-md-0">
        <button type="button" class="btn btn-secondary" onclick="registroUsuario.volverALista()">
            <i class="fas fa-arrow-left me-1"></i>
            Volver a Lista
        </button>
    </div>
</div>

<div class="card shadow-sm mb-4">
    <div class="card-header" style="background-color: #FF7E70; color: white; border-bottom: 3px solid #E86C5E;">
        <h5 class="mb-0">
            <i class="fas fa-info-circle me-2"></i>
            Información del Usuario
        </h5>
    </div>
    <div class="card-body">
        <form id="formUsuario">
            <!-- Empresa oculta - se toma del usuario logueado -->
            <input type="hidden" id="empresa">
            <input type="hidden" id="sede">
            
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="empresaNombre" class="form-label">Empresa:</label>
                    <input type="text" class="form-control" id="empresaNombre" readonly>
                </div>
                <div class="col-md-6">
                    <label for="fechaNacimiento" class="form-label">Fecha Nacimiento: <span class="text-danger">*</span></label>
                    <input type="date" class="form-control" id="fechaNacimiento" required>
                </div>
            </div>
            
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="tipoDoc" class="form-label">Tipo Doc.: <span class="text-danger">*</span></label>
                    <select class="form-select" id="tipoDoc" required>
                        <option value="" selected disabled>--SELECCIONE--</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="nroDoc" class="form-label">Nro. Doc.: <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="nroDoc" required>
                </div>
            </div>
            
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="nombres" class="form-label">Nombres: <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="nombres" placeholder="Ingrese Nombres" required>
                </div>
                <div class="col-md-6">
                    <label for="apellidos" class="form-label">Apellidos: <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="apellidos" placeholder="Ingrese Apellidos" required>
                </div>
            </div>
            
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="rol" class="form-label">Rol: <span class="text-danger">*</span></label>
                    <select class="form-select" id="rol" required>
                        <option value="" selected disabled>--SELECCIONE--</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="puesto" class="form-label">Puesto: <small class="text-muted">(Opcional)</small></label>
                    <input type="text" class="form-control" id="puesto" placeholder="Ej: Gerente, Analista, etc." disabled>
                    <small class="text-muted">Campo informativo - Se implementará con tabla de puestos</small>
                </div>
            </div>
            
            <div class="row mb-3">
                <div class="col-md-6">
                    <label for="telefono" class="form-label">Teléfono: <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="telefono" required>
                </div>
                <div class="col-md-6">
                    <label for="email" class="form-label">E-mail: <span class="text-danger">*</span></label>
                    <input type="email" class="form-control" id="email" required>
                </div>
            </div>
            
            <div class="alert alert-info">
                <i class="fas fa-info-circle me-2"></i>
                <strong>Nota:</strong> El usuario se creará con estado <strong>Activo</strong> por defecto.
            </div>
            
            <div class="d-flex justify-content-end gap-2">
                <button type="button" class="btn btn-secondary" onclick="registroUsuario.cancelarFormulario()">
                    <i class="fas fa-times me-1"></i>
                    Cancelar
                </button>
                <button type="button" class="btn btn-primary" onclick="registroUsuario.guardarUsuario()">
                    <i class="fas fa-arrow-right me-1"></i>
                    Siguiente
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Modal de Credenciales -->
<div class="modal fade" id="modalCredenciales" tabindex="-1" aria-labelledby="modalCredencialesLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header" style="background-color: #28a745; color: white;">
                <h5 class="modal-title" id="modalCredencialesLabel">
                    <i class="fas fa-key me-2"></i>
                    Configurar Credenciales de Acceso
                </h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p class="mb-3">Complete las credenciales de acceso para el nuevo usuario:</p>
                
                <form id="formCredenciales">
                    <div class="mb-3">
                        <label for="username" class="form-label">Nombre de Usuario: <span class="text-danger">*</span></label>
                        <input type="text" class="form-control" id="username" placeholder="usuario.ejemplo" required>
                        <small class="text-muted">Se generó automáticamente basado en el nombre</small>
                    </div>
                    
                    <div class="mb-3">
                        <label for="password" class="form-label">Contraseña: <span class="text-danger">*</span></label>
                        <div class="input-group">
                            <input type="password" class="form-control" id="password" placeholder="Mínimo 6 caracteres" required>
                            <button class="btn btn-outline-secondary" type="button" onclick="registroUsuario.togglePassword()">
                                <i class="fas fa-eye" id="togglePasswordIcon"></i>
                            </button>
                        </div>
                        <small class="text-muted">Mínimo 6 caracteres</small>
                    </div>
                    
                    <div class="mb-3">
                        <label for="confirmPassword" class="form-label">Confirmar Contraseña: <span class="text-danger">*</span></label>
                        <input type="password" class="form-control" id="confirmPassword" placeholder="Repita la contraseña" required>
                    </div>
                    
                    <div class="alert alert-warning">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Importante:</strong> El usuario deberá cambiar su contraseña en el primer inicio de sesión.
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                    <i class="fas fa-times me-1"></i>
                    Cancelar
                </button>
                <button type="button" class="btn btn-success" onclick="registroUsuario.guardarUsuarioFinal()">
                    <i class="fas fa-save me-1"></i>
                    Guardar Usuario
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Estilos específicos para el formulario de registro -->
<style>
    /* Aplicar colores salmón al formulario */
    .form-control:focus,
    .form-select:focus {
        border-color: #FF7E70 !important;
        box-shadow: 0 0 0 0.2rem rgba(255, 126, 112, 0.25) !important;
    }
    
    .form-label {
        color: #212529;
        font-weight: 500;
    }
    
    .text-danger {
        color: #dc3545 !important;
    }
    
    /* Estilos para botones */
    .btn-primary {
        background-color: #FF7E70 !important;
        border-color: #FF7E70 !important;
        color: white !important;
        box-shadow: 0 2px 6px rgba(255, 126, 112, 0.3);
        transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
        background-color: #E86C5E !important;
        border-color: #E86C5E !important;
        transform: translateY(-2px);
        box-shadow: 0 4px 10px rgba(255, 126, 112, 0.4);
    }
    
    .btn-secondary {
        background-color: #6c757d !important;
        border-color: #6c757d !important;
        transition: all 0.3s ease;
    }
    
    .btn-secondary:hover {
        background-color: #5a6268 !important;
        border-color: #545b62 !important;
        transform: translateY(-2px);
    }
    
    /* Estilos para el card */
    .card.shadow-sm {
        box-shadow: 0 4px 12px rgba(255, 126, 112, 0.1) !important;
        border: none;
        border-radius: 12px;
        overflow: hidden;
    }
    
    .card-body {
        padding: 2rem;
    }
    
    /* Estilos para el header del módulo */
    .border-bottom {
        border-bottom: 3px solid #FFB8B0 !important;
    }
    
    .h2, h2 {
        color: #212529;
        font-weight: 700;
    }
    
    /* Estilos para campos readonly */
    .form-control[readonly] {
        background-color: #f8f9fa;
        border-color: #FFB8B0;
        color: #6c757d;
    }
    
    /* Animaciones suaves */
    .form-control,
    .form-select,
    .btn {
        transition: all 0.3s ease;
    }
    
    /* Estilos responsivos */
    @media (max-width: 768px) {
        .card-body {
            padding: 1.5rem;
        }
        
        .btn-toolbar {
            margin-bottom: 1rem !important;
        }
        
        .btn-toolbar .btn {
            margin-bottom: 0.5rem;
        }
    }
    
    /* Estilos para validación */
    .form-control.is-valid,
    .form-select.is-valid {
        border-color: #28a745;
    }
    
    .form-control.is-invalid,
    .form-select.is-invalid {
        border-color: #dc3545;
    }
</style>

<!-- Incluir el JavaScript específico del módulo -->
<script src="/js/modules/registro-usuario.js"></script>
